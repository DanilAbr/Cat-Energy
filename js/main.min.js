
function addMenuToggleListner(){const menuElement=document.querySelector('.main-nav');if(!menuElement){return;}
const menuToggleElement=menuElement.querySelector('.main-nav__toggle');function toggleClass(){menuElement.classList.toggle('main-nav--closed');menuElement.classList.toggle('main-nav--opened');}
function checkButtonAriaLabelAttribute(button){if(menuElement.classList.contains('main-nav--closed')){button.setAttribute('aria-label','Открыть меню');}else{button.setAttribute('aria-label','Закрыть меню');}}
function onMenuToggleClick(){toggleClass();checkButtonAriaLabelAttribute(menuToggleElement)}
menuElement.classList.remove('main-nav--nojs');menuElement.classList.remove('main-nav--opened');menuElement.classList.add('main-nav--closed');menuToggleElement.addEventListener('click',()=>{onMenuToggleClick();})}
function addMobileTouchSliderListeners(){const gallery=document.querySelector('.gallery');if(!gallery){return;}
const galleryResize=gallery.querySelector('.gallery__resize');const pin=gallery.querySelector('.slider__pointer');const bar=gallery.querySelector('.slider__scale');const buttonBefore=gallery.querySelector('.slider__button--before');const buttonAfter=gallery.querySelector('.slider__button--after');const totalMarginOfPin=getComputedStyle(pin).marginLeft.slice(0,1)*2+2;const maxPinWidth=bar.offsetWidth-totalMarginOfPin;function getLevel(){return Math.round((pin.offsetWidth/maxPinWidth)*100);}
function onPinMousedown(evt){evt.preventDefault();let startCoordX=evt.changedTouches[0].pageX;function onMouseMove(moveEvt){let shiftX=startCoordX-moveEvt.changedTouches[0].pageX;startCoordX=moveEvt.changedTouches[0].pageX;pin.style.width=(pin.offsetWidth-shiftX)+'px';galleryResize.style.width=100-getLevel()+'%';if(pin.offsetWidth<0||pin.offsetWidth>maxPinWidth){pin.style.width=(pin.offsetWidth+shiftX)+'px';}}
function onMouseUp(upEvt){upEvt.preventDefault();document.removeEventListener('touchmove',onMouseMove);document.removeEventListener('touchend',onMouseUp);}
document.addEventListener('touchmove',onMouseMove);document.addEventListener('touchend',onMouseUp);}
function onButtonBeforeClick(){pin.style.width=0;galleryResize.style.width='100%';}
function onButtonAfterClick(){pin.style.width=maxPinWidth+'px';galleryResize.style.width=0;}
buttonBefore.addEventListener('click',()=>{onButtonBeforeClick();})
buttonAfter.addEventListener('click',()=>{onButtonAfterClick();})
function setOrDeleteTransition(evt){if(evt.target===buttonAfter||evt.target===buttonBefore){galleryResize.classList.add('js--transition');pin.classList.add('js--transition');}else{galleryResize.classList.remove('js--transition');pin.classList.remove('js--transition');}}
document.addEventListener('touchstart',(evt)=>{setOrDeleteTransition(evt);});bar.addEventListener('touchstart',onPinMousedown);}
function addDesktopTouchSliderListeners(){const gallery=document.querySelector('.gallery');if(!gallery){return;}
const galleryResize=gallery.querySelector('.gallery__resize');const pin=gallery.querySelector('.slider__pointer');const bar=gallery.querySelector('.slider__scale');const buttonBefore=gallery.querySelector('.slider__button--before');const buttonAfter=gallery.querySelector('.slider__button--after');const totalMarginOfPin=getComputedStyle(pin).marginLeft.slice(0,1)*2+2;const maxPinWidth=bar.offsetWidth-totalMarginOfPin;function getLevel(){return Math.round((pin.offsetLeft/maxPinWidth)*100);}
function onPinMousedown(evt){evt.preventDefault();let startCoordX=evt.changedTouches[0].pageX;function onMouseMove(moveEvt){let shiftX=startCoordX-moveEvt.changedTouches[0].pageX;startCoordX=moveEvt.changedTouches[0].pageX;pin.style.left=(pin.offsetLeft-shiftX)+'px';galleryResize.style.width=100-getLevel()+'%';if(pin.offsetLeft<0||pin.offsetLeft>maxPinWidth){pin.style.left=(pin.offsetLeft+shiftX)+'px';}}
function onMouseUp(upEvt){upEvt.preventDefault();document.removeEventListener('touchmove',onMouseMove);document.removeEventListener('touchend',onMouseUp);}
document.addEventListener('touchmove',onMouseMove);document.addEventListener('touchend',onMouseUp);}
function onButtonBeforeClick(){pin.style.left=0;galleryResize.style.width='100%';}
function onButtonAfterClick(){pin.style.left=maxPinWidth+'px';galleryResize.style.width=0;}
buttonBefore.addEventListener('click',()=>{onButtonBeforeClick();})
buttonAfter.addEventListener('click',()=>{onButtonAfterClick();})
function setOrDeleteTransition(evt){if(evt.target===buttonAfter||evt.target===buttonBefore){galleryResize.classList.add('js--transition');pin.classList.add('js--transition');}else{galleryResize.classList.remove('js--transition');pin.classList.remove('js--transition');}}
document.addEventListener('touchstart',(evt)=>{setOrDeleteTransition(evt);});bar.addEventListener('touchstart',onPinMousedown);}
function addNoTouchDeviceSilderListeners(){const gallery=document.querySelector('.gallery');if(!gallery){return;}
const galleryResize=gallery.querySelector('.gallery__resize');const pin=gallery.querySelector('.slider__pointer');const bar=gallery.querySelector('.slider__scale');const buttonBefore=gallery.querySelector('.slider__button--before');const buttonAfter=gallery.querySelector('.slider__button--after');const totalMarginOfPin=getComputedStyle(pin).marginLeft.slice(0,1)*2+2;const maxPinWidth=bar.offsetWidth-totalMarginOfPin;function getLevel(){return Math.round((pin.offsetWidth/maxPinWidth)*100);}
function onPinMousedown(evt){evt.preventDefault();let startCoordX=evt.clientX;function onMouseMove(moveEvt){moveEvt.preventDefault();let shiftX=startCoordX-moveEvt.clientX;startCoordX=moveEvt.clientX;pin.style.width=(pin.offsetWidth-shiftX)+'px';galleryResize.style.width=100-getLevel()+'%';if(pin.offsetWidth<0||pin.offsetWidth>maxPinWidth){pin.style.width=(pin.offsetWidth+shiftX)+'px';}}
function onMouseUp(upEvt){upEvt.preventDefault();document.removeEventListener('mousemove',onMouseMove);document.removeEventListener('mouseup',onMouseUp);}
document.addEventListener('mousemove',onMouseMove);document.addEventListener('mouseup',onMouseUp);}
function onButtonBeforeClick(){pin.style.width=0;galleryResize.style.width='100%';}
function onButtonAfterClick(){pin.style.width=maxPinWidth+'px';galleryResize.style.width=0;}
buttonBefore.addEventListener('click',()=>{onButtonBeforeClick();})
buttonAfter.addEventListener('click',()=>{onButtonAfterClick();})
function setOrDeleteTransition(evt){if(evt.target===buttonAfter||evt.target===buttonBefore){galleryResize.classList.add('js--transition');pin.classList.add('js--transition');}else{galleryResize.classList.remove('js--transition');pin.classList.remove('js--transition');}}
document.addEventListener('mousedown',(evt)=>{setOrDeleteTransition(evt);});bar.addEventListener('mousedown',onPinMousedown);}
function addDesktopNoTouchSliderListeners(){const gallery=document.querySelector('.gallery');if(!gallery){return;}
const galleryResize=gallery.querySelector('.gallery__resize');const pin=gallery.querySelector('.slider__pointer');const bar=gallery.querySelector('.slider__scale');const buttonBefore=gallery.querySelector('.slider__button--before');const buttonAfter=gallery.querySelector('.slider__button--after');const totalMarginOfPin=getComputedStyle(pin).marginLeft.slice(0,1)*2+2;const maxPinWidth=bar.offsetWidth-totalMarginOfPin;function getLevel(){return Math.round((pin.offsetLeft/maxPinWidth)*100);}
function onPinMousedown(evt){evt.preventDefault();let startCoordX=evt.clientX;function onMouseMove(moveEvt){moveEvt.preventDefault();let shiftX=startCoordX-moveEvt.clientX;startCoordX=moveEvt.clientX;pin.style.left=(pin.offsetLeft-shiftX)+'px';galleryResize.style.width=100-getLevel()+'%';if(pin.offsetLeft<0||pin.offsetLeft>maxPinWidth){pin.style.left=(pin.offsetLeft+shiftX)+'px';}}
function onMouseUp(upEvt){upEvt.preventDefault();document.removeEventListener('mousemove',onMouseMove);document.removeEventListener('mouseup',onMouseUp);}
document.addEventListener('mousemove',onMouseMove);document.addEventListener('mouseup',onMouseUp);}
function onButtonBeforeClick(){pin.style.left=0;galleryResize.style.width='100%';}
function onButtonAfterClick(){pin.style.left=maxPinWidth+'px';galleryResize.style.width=0;}
buttonBefore.addEventListener('click',()=>{onButtonBeforeClick();})
buttonAfter.addEventListener('click',()=>{onButtonAfterClick();})
function setOrDeleteTransition(evt){if(evt.target===buttonAfter||evt.target===buttonBefore){galleryResize.classList.add('js--transition');pin.classList.add('js--transition');}else{galleryResize.classList.remove('js--transition');pin.classList.remove('js--transition');}}
document.addEventListener('mousedown',(evt)=>{setOrDeleteTransition(evt);});bar.addEventListener('mousedown',onPinMousedown);}
const isTouchDevice='ontouchstart'in document.documentElement;const isMobileWidth=window.innerWidth<768;addMenuToggleListner();if(isTouchDevice&&isMobileWidth){addMobileTouchSliderListeners();}
if(isTouchDevice&&!isMobileWidth){addDesktopTouchSliderListeners();}
if(!isTouchDevice&&isMobileWidth){addNoTouchDeviceSilderListeners();}
if(!isTouchDevice&&!isMobileWidth){addDesktopNoTouchSliderListeners();}